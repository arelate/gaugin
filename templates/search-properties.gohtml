{{define "search-properties"}}
    <form class="search-form" action="/search" xmlns="http://www.w3.org/1999/html">
        <details {{if not .Query}}open{{end}}>
            <summary>Filter & Search</summary>
            {{if .Query}}
                {{template "search-query" .Query}}
            {{end}}
            {{template "search-submit"}}
            <section class="search-properties">
                {{$digests := .Digests}}
                {{$query := .Query}}
                {{range $property := .SearchProperties}}
                    {{$value := index $query $property}}
                    <div class="search-property">
                        {{$digests := index $digests $property}}
                        <label for="search-{{$property}}">{{searchPropertyName $property}}</label>
                        {{if $digests}}
                            <select id="search-{{$property}}" name="{{$property}}">
                                <option {{if eq $value ""}}selected{{end}} value="">
                                    Any {{searchPropertyName $property}}...
                                </option>
                                {{range $digests}}
                                    <option {{if eq $value .}}selected{{end}} value="{{.}}">{{.}}</option>
                                {{end}}
                            </select>
                        {{else}}
                            <input id="search-{{$property}}" type="search" name="{{$property}}"
                                   placeholder="{{searchPropertyName $property}}"
                                   value="{{$value}}"/>
                        {{end}}
                    </div>
                {{end}}
            </section>
            {{template "search-submit"}}
        </details>
    </form>
{{end}}
{{define "search-submit"}}
    <div class="search-submit">
        <label for="submit"></label>
        <input id="submit" type="submit"/>
    </div>
{{end}}